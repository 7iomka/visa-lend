/*! PhotoSwipe UI v5.0.0 - 2016-10-11 - http://photoswipe.com - (c) 2016 Dmitry Semenov */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h=this,i=!1,j=!0,k={closeElClasses:["item","zoom-wrap"],tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0},l=function(c,d){if(g)return clearTimeout(g),g=null,!0;if(a.getIsOpen()){g=setTimeout(function(){g=null},40);var e;b.closest(c.target,function(a){return!!a.classList&&(q.forEach(function(b){if(b.onTap&&a.classList.contains("pswp__"+b.name))return b.onTap(c),e=b,!0}),!!e||void 0)});var i={};if(a.shout("uiGlobalClick",c,e,i),i.stop)return!0;if(!e){if(f.openZoomed)return void a.close();var k=c.target.classList.contains("pswp__img");if(a.lastPointer&&"mouse"!==a.lastPointer.type){if(a.options.sidebarCaption)j?h.hideControls():h.showControls();else if(k||o(c.target))return void a.close()}else{if(o(c.target))return void a.close();k&&(a.currItem.fitRatio>=1?f.clickToCloseNonZoomable&&a.close():a.toggleZoom(d||{x:c.clientX,y:c.clientY}))}}}},m=function(a,b,c){a.classList[c?"add":"remove"]("pswp__"+b)},n=function(){var b=1===f.getNumItemsFn();b!==d&&(a.template.classList[b?"add":"remove"]("pswp--one-slide"),d=b)},o=function(a){for(var b=0;b<f.closeElClasses.length;b++)if(a.classList.contains("pswp__"+f.closeElClasses[b]))return!0},p=function(){c("onVerticalDrag",function(a){e||(j&&a<.95?h.hideControls():!j&&a>=.95&&h.showControls())});var a;c("onPinchClose",function(b){e||(j&&b<.9?(h.hideControls(),a=!0):a&&!j&&b>.9&&h.showControls())}),c("zoomGestureEnded",function(){a=!1,a&&!j&&h.showControls()})},q=[],r=function(a){q.push(a)};h.init=function(){c=a.listen,k.loadingIndicatorDelay=1e3;var d=function(b){d=b;var d,e,g,h=0,i=1,j=function(a){e!==a&&(e=a,k(),m(d,"preloader--active",a))},k=function(){e&&(d.style.left=a.viewportSize.x/2+"px",d.style.top=a.viewportSize.y/2+"px")};c("afterChange",function(){!e||a.currItem&&a.currItem.loading||j(h),clearTimeout(g),g=setTimeout(function(){return a.currItem&&a.currItem.loading&&(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)?void j(i):void j(h)},f.loadingIndicatorDelay)}),c("imageLoadComplete",function(b,c){a.currItem===c&&j(h)}),c("destroy",function(){clearTimeout(g),j(h)}),c("resize",k)};r({name:"preloader",onInit:d}),r({name:"button--arrow--left",onTap:a.prev}),r({name:"button--arrow--right",onTap:a.next}),r({name:"button--close",onTap:a.close}),k.indexIndicatorSep=" / ",r({name:"counter",onInit:function(b){c("uiUpdate",function(){j&&(b.innerHTML=a.getCurrentIndex()+1+f.indexIndicatorSep+f.getNumItemsFn())})}}),k.shareButtons=[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin image",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],k.getImageURLForShare=function(){return a.currItem.src||""},k.getPageURLForShare=function(){return window.location.href},k.getTextForShare=function(){return a.currItem.title||""};var e=function(d){var e,g,h,i=!0;if(e=d){g=a.template.getElementsByClassName("pswp__share-tooltip")[0],g?(g.style.display="none",g.classList.remove("pswp__share-tooltip--visible")):(g=b.createEl("pswp__share-tooltip"),e.parentElement.appendChild(g)),c("destroy",function(){h&&clearTimeout(h),g&&b.unbind(g,"click",l)}),c("uiGlobalClick",function(a,b,c){i||b&&"button--share"===b.name||(a.target.parentElement===g&&(c.stop=!0),j())}),c("uiUpdate",function(){i||j()});var j=function(){return i=!i,h&&clearTimeout(h),i?(g.classList.remove("pswp__share-tooltip--visible"),h=setTimeout(function(){g.style.display="none"},300)):(k(),g.style.display="block",h=setTimeout(function(){g.classList.add("pswp__share-tooltip--visible")},30)),!1},k=function(){var a,c,d,e,h,i="",j=document.createDocumentFragment();f.shareButtons.forEach(function(g){c=f.getImageURLForShare(g),d=f.getPageURLForShare(g),e=f.getTextForShare(g),a=g.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),a&&(h=b.createEl("pswp__share--"+g.id,"a"),h.href=a,h.target="_blank",g.download&&h.setAttribute("download",""),h.innerHTML=g.label,j.appendChild(h),f.parseShareButton&&(i=f.parseShareButton(g,h)))}),g.innerHTML="",g.appendChild(j),b.bind(g,"click",l)},l=function(b){var c={stop:!1};return a.shout("shareLinkClick",b,b.target,c),!(!c.stop&&!b.target.hasAttribute("download"))||!!b.target.href&&(b.preventDefault(),window.open(b.target.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),!1)};this.onTap=j}};r({name:"button--share",onInit:e}),r({name:"button--zoom",onTap:function(){a.toggleZoom()}});var i=function(){var d=h.fullscreenAPI={},e=function(b){a.template.classList[d.isFullscreen()?"add":"remove"]("pswp--fs")},g=function(){var b,c=document.documentElement;return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:"fullscreenchange"}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"mozfullscreenchange"}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkitfullscreenchange"}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b};if(d=g()){var i=function(){d.isFullscreen()?d.exit():d.enter()};c("unbindEvents",function(){b.unbind(document,d.eventK,e),d.isFullscreen()&&(f.hideAnimationDuration=0,d.exit())}),c("keydown",function(a){70===a.keyCode&&i()}),b.bind(document,d.eventK,e),e(),a.template.classList.add("pswp--supports-fs"),this.onTap=i}};r({name:"button--fs",onInit:i}),k.addCaptionHTMLFn=function(a,b){return a.title?(b.innerHTML=a.title,!0):void(b.innerHTML="")};var o=function(d){var e,g=a.template.getElementsByClassName("pswp__top-bar")[0];if(g||(g=a.template.getElementsByClassName("pswp__sidebar")[0]),g){var i=function(){var c=g.classList.contains("pswp__sidebar");c!==e&&(e?(g.classList.remove("pswp__top-bar"),g.classList.add("pswp__sidebar"),d&&g.appendChild(d),j||h.showControls(),a.template.classList.add("pswp--sidebar-on")):(g.classList.add("pswp__top-bar"),g.classList.remove("pswp__sidebar"),d&&b.getChildByClass(a.template,"pswp__scroll-wrap").appendChild(d),a.template.classList.remove("pswp--sidebar-on")))};c("filterViewportSize",function(){!a.options.sidebarCaption||a.viewportSize.x<=1024?e=!1:(e=!0,a.viewportSize.x-=230)}),c("beforeResize",i),c("uiGlobalClick",function(a,b,c){(a.target===g||a.target===d||e&&g.contains(a.target)||!e&&d.contains(a.target))&&(c.stop=!0)}),c("preventDragEvent",function(a,c,d){if(d.prevent){var e=b.closest(a.target,function(a){var b=a.getAttribute("class");return b&&b.indexOf("pswp__caption")>-1});e&&(d.prevent=!1)}}),c("uiUpdate",function(){var b=f.addCaptionHTMLFn(a.currItem,d);d.classList[b?"remove":"add"]("pswp__caption--empty")}),i()}};r({name:"caption",onInit:o}),k.getThumbImageFn=function(){};var s=function(d){var e,f=-1;r({name:"thumb",onTap:function(b){var c=e.indexOf("IMG"===b.target.tagName?b.target.parentElement:b.target);c>-1&&a.goTo(c)}});var g=function(){var b=a.getCurrentIndex();b!==f&&(e[f]&&e[f].classList.remove("pswp__thumb--selected"),e[b]&&(e[b].classList.add("pswp__thumb--selected"),f=b))};c("allowDoubleTap",function(a,b){var c=String(a.target.className);c.indexOf("pswp__thumb")>-1&&(b.allow=!1)}),c("afterGoto",g),c("uiUpdate",function(){if(!e){e=[];for(var c=document.createDocumentFragment(),f=0;f<a.options.getNumItemsFn();f++){var h=a.getItemAt(f),i=b.createEl("pswp__thumb"),j=a.options.getThumbImageFn(h);if(j){var k=b.createEl("pswp__thumb-img","img");k.src=a.options.getThumbImageFn(h),i.appendChild(k)}c.appendChild(i),e.push(i)}d.appendChild(c)}g()}),c("destroy",function(){d.innerHTML=""}),c("mouseMovePan",function(a,b){a.target.className.indexOf("pswp__thumb")>-1&&(b.stop=!0)})};r({name:"thumbs",onInit:s}),b.extend(a.options,k,!0),f=a.options,p(),c("beforeChange",h.update),c("doubleTap",a.toggleZoom),c("tap",l),c("bindEvents",function(){b.bind(a.template,"click",l),a.likelyTouchDevice||(b.bind(a.template,"mouseover",h.onMouseOver),b.bind(a.template,"mouseleave",h.onMouseLeaveGallery))}),c("unbindEvents",function(){b.unbind(a.template,"click",l),b.unbind(a.template,"mouseover",h.onMouseOver),b.unbind(a.template,"mouseleave",h.onMouseLeaveGallery)}),c("destroy",function(){clearTimeout(g)}),c("initialZoomIn",function(){a.template.classList.add("pswp--ui-visible")}),c("initialZoomOut",function(){a.template.classList.remove("pswp--ui-visible")}),n(),q.forEach(function(b){var c=a.template.getElementsByClassName("pswp__"+b.name)[0];b.onInit&&c&&(f[b.name]===!1?c.classList.add("pswp__hidden"):(c.classList.remove("pswp__hidden"),b.onInit(c)))})},h.update=function(){i=!(!j||!a.currItem),n(),a.shout("uiUpdate",i)},h.onMouseOver=function(b){a.template.classList.remove("pswp--mouse-out"),m(a.template,"ui--over-close",o(b.target))},h.onMouseLeaveGallery=function(){a.template.classList.add("pswp--mouse-out"),m(a.template,"ui--over-close",!1)},h.hideControls=function(){a.template.classList.remove("pswp--ui-visible"),j=!1},h.showControls=function(){j=!0,i||h.update(),a.template.classList.add("pswp--ui-visible")}};return a});