/*! PhotoSwipe  v5.0.0 - 2016-10-11 - http://photoswipe.com - (c) 2016 Dmitry Semenov */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={bind:function(a,b,c,d){if(a){var e=(d?"remove":"add")+"EventListener";b=b.split(" "),b.forEach(function(b){b&&a[e](b,c,!1)})}},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},unbind:function(a,b,c){e.bind(a,b,c,!0)},getChildByClass:function(a,b){for(var c=a.firstElementChild;c;){if(c.classList.contains(b))return c;c=c.nextElementSibling}},closest:function(a,b){return!(!a||a===document||a.classList.contains("pswp"))&&(b(a)?a:e.closest(a.parentElement,b))},extend:function(a,b,c){for(var d in b)c&&a.hasOwnProperty(d)||(a[d]=b[d])},cssEasing:{inOut:"cubic-bezier(.4, 0, .22, 1)",out:"cubic-bezier(0, 0, .22, 1)",in:"cubic-bezier(.4, 0, 1, 1)"},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}}},f=this,g=3,h={allowPanToNext:!0,spacing:.12,bgOpacity:1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.fitRatio<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,allowMouseDrag:!0};e.extend(h,d);var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G={},H={},I=0,J={},K=[],L=[],M={},N=0,O=!1,P=function(a,b){e.extend(f,b.publicMethods),L.push(a)},Q=function(a){var b=nb();return a>b-1?a-b:a<0?b+a:a},R=function(){var a=e.createEl().style;D="perspective"in a||"webkitPerspective"in a,B=C="transform"in a?"transform":"webkitTransform","transform"!==C&&(C="-webkit-transform")},S={},T=function(a,b){return S[a]||(S[a]=[]),S[a].push(b)},U=function(a){var b=S[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},V=Date.now,W=function(a){E=a,A.style.opacity=a*h.bgOpacity},X=function(a){f.currItem.src&&(a=a||f.currItem.container.lastElementChild,a&&(a.style[B]="translateZ(0)",a.style.willChange="transform"))},Y=function(a,b){return"translate"+(D?"3d(":"(")+a+"px,"+b+"px"+(D?",0px)":")")},Z=function(a,b,c,d,e){h.openZoomed||(!O||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[B]=Y(b,c)+"scale"+(D?"3d(":"(")+d+","+d+(D?",1)":")")},$=function(a,b,c){a.style[B]=Y(b,c||0)},_=function(a,b){x&&(!h.openZoomed&&a&&(b&&X(),p>f.currItem.fitRatio&&!b?O||($b(f.currItem,!1,!0),O=!0):O&&($b(f.currItem),O=!1)),Vb(f.currItem,p,kb),Z(x,M.x,M.y,p),U("zoomPanUpdate",p,M))},aa=function(a,b){return a.x=b.x,a.y=b.y,b.id&&(a.id=b.id),a},ba=function(a){var b={};a===f.currItem?aa(b,kb.center):(Vb(a,a.initialZoomLevel,lb),aa(b,lb.center)),U("itemZoomPan",a,b),Z(a.container.style,b.x,b.y,a.initialZoomLevel,a)},ca=function(a,b){if(!h.loop&&b){var c=k+(H.x*I-a)/H.x,d=Math.round(a-N);(c<0&&d>0||c>=nb()-1&&d<0)&&(a=N+d*h.mainScrollEndFriction)}N=a,$(y,a)},da=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},ea=function(){F&&(e.unbind(document,"mousemove",ea),a.classList.add("pswp--has_mouse"),h.mouseUsed=!0,U("mouseUsed")),F=setTimeout(function(){F=null},100)},fa=function(){e.bind(document,"keydown",f),e.bind(z,"click",f),h.mouseUsed||e.bind(document,"mousemove",ea),e.bind(window,"resize scroll",f),U("bindEvents")},ga=function(){e.unbind(window,"resize scroll",f),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",ea),e.unbind(z,"click",f),e.unbind(window,n,f),z.ontouchmove=z.ontouchend=null,U("unbindEvents")},ha=function(a,b){return b=Math.min(b,kb.min[a]),b=Math.max(b,kb.max[a])},ia=function(a,b,c){var d,e=kb.max[a]-kb.min[a];if(0===e)return kb.center[a];if(c){var g=b[a]-M[a];d=M[a]+g-g*(c/p)}else{var h=f.currItem["x"===a?"w":"h"]*f.currItem.fitRatio,i=Math.round((G[a]-h)/2);i+=.15*h;var j=(b[a]-i)/(G[a]-2*i);d=j>1?(1-j)*G[a]+e:j<0?-j*G[a]:e*j,d+=kb.min[a]}return ha(a,d)},ja=function(a){if(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)return!0;var b,c,d;switch(a.keyCode){case 13:f.closedViaKeyboard="enter";break;case 27:h.escKey&&(b="close",f.closedViaKeyboard="esc");break;case 90:b="toggleZoom";break;case 37:c="x";break;case 38:c="y";break;case 39:c="x",d=!0;break;case 40:d=!0,c="y"}c&&(p>f.currItem.fitRatio?(M[c]+=d?-60:60,a.preventDefault(),f.panTo(M.x,M.y)):h.arrowKeys&&"x"===c&&(b=d?"next":"prev")),U("keydown",a,b),b&&(a.preventDefault(),f[b]())},ka={},la=function(a){for(var b in ka)ka[b]&&ka[b].el===a.target&&(ka[b].fn(),ka&&delete ka[b])},ma=function(){f.setScrollOffset(0,window.pageYOffset)},na=function(a,b,c,d){a.style.transition=b?b+" "+c+"ms "+(d||e.cssEasing.inOut):"none"},oa={},pa=0,qa=function(a){oa[a]&&(oa[a].raf&&window.cancelAnimationFrame(oa[a].raf),pa--,delete oa[a])},ra=function(a){oa[a]&&qa(a),oa[a]||(pa++,oa[a]={})},sa=function(){for(var a in oa)qa(a)},ta=function(a,b,c,d,e,f,g){var h,i=V();ra(a);var j=function(){if(oa[a]){if(h=V()-i,h>=d)return qa(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),oa[a].raf=window.requestAnimationFrame(j)}};j()},ua={shout:U,listen:T,viewportSize:G,options:h,offset:J,isMainScrollAnimating:function(){return u},getZoomLevel:function(){return p},getCurrentIndex:function(){return k},getIsOpen:function(){return i},setScrollOffset:function(a,b){J.x=a,J.y=b,U("updateScrollOffset",J)},applyZoomPan:function(a,b,c,d){M.x=b,M.y=c,p=a,_(d)},init:function(){if(window.requestAnimationFrame&&Date.now&&!i&&!j){f.framework=e,f.template=a,v=a.className,i=!0,R(),A=e.getChildByClass(a,"pswp__bg"),z=e.getChildByClass(a,"pswp__scroll-wrap"),y=e.getChildByClass(z,"pswp__container"),y.innerHTML="";for(var c=0;c<3;c++){var d=e.createEl("pswp__item");d.style.display=1===c?"block":"none",K.push({el:d,index:-1}),y.appendChild(d)}o={resize:f.updateSize,scroll:ma,keydown:ja},L.forEach(function(a){f["init"+a]()}),b&&(f.ui=new b(f,e),f.ui.init()),k=h.index||0,U("firstUpdate"),(isNaN(k)||k<0||k>=nb())&&(k=0),f.currItem=mb(k);var g="";return U("gettingData",k,f.currItem,!0),J.y=window.pageYOffset,f.currItem.initialLayout=h.getThumbBoundsFn&&h.getThumbBoundsFn.call(f,k),U("initialLayout"),h.modal?(f.updateSize(),a.style.position="fixed"):g+="pswp--open ",a.setAttribute("aria-hidden","false"),g+=h.mainClass?h.mainClass:"",g+=t?"pswp--touch":"pswp--notouch",g+=h.allowMouseDrag?"":" pswp--no-mouse-drag",g+=h.openZoomed?" pswp--initially-zoomed":"",a.className+=" "+g,O=h.openZoomed,h.modal||f.updateSize(),e.bind(a,"transitionend",la),l=-1,K.forEach(function(a,b){$(a.el,(b+l)*H.x)}),e.bind(z,m,f),T("initialZoomInEnd",function(){f.setContent(K[0],k-1),f.setContent(K[2],k+1),K[0].el.style.display=K[2].el.style.display="block",fa()}),f.setContent(K[1],k),f.updateCurrItem(),h.modal&&a.classList.add("pswp--open"),U("afterInit"),!0}},close:function(){i&&(i=!1,j=!0,U("close"),ga(),Pb())},destroy:function(){clearTimeout(fb),clearTimeout(q),e.unbind(a,"transitionend",la),ka=null,a.setAttribute("aria-hidden","true"),a.className=v,e.unbind(z,m,f),U("destroy"),Ta(),sa(),y.innerHTML="",S=null},panTo:function(a,b,c){c||(a=ha("x",a),b=ha("y",b)),M.x=a,M.y=b,_()},handleEvent:function(a){o[a.type]&&o[a.type](a)},goTo:function(a){a=Q(a);var b;if(h.loop){var c=nb()-1;b=0===k&&a===c?-1:k===c&&0===a?1:a-k}else b=a-k;if(0!==b){var d={};if(U("goto",a,b,d),d.stop)return void U("afterGoto");k=a,sa(),u=!1,s=b,f.currItem=mb(k),I-=s,ca(H.x*I),f.updateCurrItem(),U("afterGoto")}},next:function(){if(h.loop||k<nb()-1)return f.goTo(k+1),!0},prev:function(){if(h.loop||k>0)return f.goTo(k-1),!0},updateCurrZoomItem:function(a){a&&U("beforeChange",0),x=f.currItem.container?f.currItem.container.style:null,p=f.currItem.initialZoomLevel,Vb(f.currItem,p,kb),M.x=kb.center.x,M.y=kb.center.y,U("zoomItemUpdate"),a&&U("afterChange")},invalidateCurrItems:function(){K.forEach(function(a){a.item&&!a.item.added&&(a.item.needsUpdate=!0)})},updateCurrItem:function(a){if(0!==s){var b,c=Math.abs(s);if(f.currItem=mb(k),O=h.openZoomed,U("beforeChange",s),!a){c>=g&&(l+=s+(s>0?-g:g),c=g);for(var d=0;d<c;d++)s>0?(b=K.shift(),K[g-1]=b,a||l++,$(b.el,(l+2)*H.x),f.setContent(b,k-c+d+1+1)):(b=K.pop(),K.unshift(b),a||l--,$(b.el,l*H.x),f.setContent(b,k+c-d-1-1))}if(x&&1===c){var e=mb(r);$b(e),ba(e)}K.forEach(function(a){a.index===k?a.el.removeAttribute("aria-hidden"):a.el.setAttribute("aria-hidden","true")}),s=0,f.updateCurrZoomItem(),r=k,U("afterChange")}},updateSize:function(){j||(h.modal?(G.x=document.documentElement.clientWidth,G.y=window.innerHeight):(G.x=z.clientWidth,G.y=z.clientHeight),ma(),H.x=G.x+Math.round(G.x*h.spacing),H.y=G.y,U("filterViewportSize"),ca(H.x*I),U("beforeResize"),void 0!==l&&K.forEach(function(a,b){var c,d;$(a.el,(b+l)*H.x),d=k+b-1,h.loop&&nb()>2&&(d=Q(d)),c=mb(d),c&&U("itemResize",c),!c||!c.needsUpdate&&c.initialZoomLevel?a.index===-1&&d>=0&&f.setContent(a,d):(f.cleanSlide(c),f.setContent(a,d),1===b&&(f.currItem=c,f.updateCurrZoomItem(!0)),c.needsUpdate=!1),c&&c.container&&1!==b&&(Wb(c),$b(c),ba(c))}),f.currItem.initialZoomLevel&&(p===f.currItem.initialZoomLevel?(Wb(f.currItem),p=f.currItem.initialZoomLevel,$b(f.currItem),_(!0)):Wb(f.currItem),Vb(f.currItem,p,kb),kb&&f.panTo(M.x,M.y)),U("resize"))},zoomTo:function(a,b,c){if(f.currItem.w&&!f.slideTransitionRunning){clearTimeout(q);var d=function(c,d){Vb(f.currItem,a,kb),M.x=ia("x",b,d?a:0),M.y=ia("y",b,d?a:0),p=a,_(c)};return c?(_(!0,!0),ra("customZoomTo"),w=!0,q=setTimeout(function(){na(f.currItem.container,C,c),ka.customZoomTo={el:f.currItem.container,fn:function(){w=!1,na(f.currItem.container),_(!0),qa("customZoomTo")}},d()},60),!0):(w&&na(f.currItem.container),void d(!0,!0))}},toggleZoom:function(a){a||(a={x:G.x/2,y:G.y/2}),p!==f.currItem.fitRatio?f.zoomTo(f.currItem.fitRatio,a,333):f.zoomTo(h.getDoubleTapZoom(!1,f.currItem),a,333)}},va={},wa=250;P("FadeSlidesTransition",{publicMethods:{initFadeSlidesTransition:function(){var a=0,b=function(){va.start=function(a,b,c,d,e){va.isNext=a,va.nextHolderIndex=d,va.elToAnimate=K[b?d:1].el,va.diff=e,f.slideTransitionRunning=!0,va.timeout=setTimeout(function(){na(va.elToAnimate,"opacity",wa,"ease"),va.elToAnimate.style.opacity=b?1:0,c&&(na(K[1].el,"opacity",wa,"ease"),K[1].el.style.opacity=0),ka.fadeSlides={el:va.elToAnimate,fn:va.complete}},80)},va.complete=function(){f.slideTransitionRunning=!1,clearTimeout(va.timeout),va.timeout=null,delete ka.fadeSlides,K[va.nextHolderIndex].el.style.zIndex=1;var a,b=K.slice(0);va.diff>=2?(K[0]=b[2],K[1]=b[0],K[2]=b[1]):va.diff<=-2?(K[1]=b[2],K[2]=b[0],K[0]=b[1]):1===va.diff?(a=K.shift(),K[g-1]=a):va.diff===-1&&(a=K.pop(),K.unshift(a)),O=h.openZoomed,K.forEach(function(a,b){var c=k-1+b;h.loop&&(c=Q(c)),a.index!==c&&f.setContent(a,c),na(a.el),a.el.style.opacity=1,$(a.el,(l+b)*H.x)}),f.updateCurrItem(!0)},va.stop=function(){f.slideTransitionRunning&&va.complete()}};T("goto",function(c,d,e){if(f.stopSlidesTransition(),a&&V()-a<400)return void(a=V());a=V(),e.stop=!0,k=c,sa(),u=!1,s=d;var g=f.currItem;f.currItem=mb(k);var i={x:M.x,y:M.y,w:p*g.w,h:p*g.h};f.updateCurrZoomItem(),U("fadeSlidesStart");var j=1===s,m=j?2:0,n=!0,o=!0;if(d>=2?(O=h.openZoomed,f.setContent(K[0],k),m=0):d<=-2&&(O=h.openZoomed,f.setContent(K[2],k),m=2),!f.options.crossfade&&f.currItem.src&&g.src){Wb(f.currItem),Vb(f.currItem,f.currItem.initialZoomLevel,lb);var q={x:lb.center.x,y:lb.center.y,w:f.currItem.initialZoomLevel*f.currItem.w,h:f.currItem.initialZoomLevel*f.currItem.h},r={x:0,y:0,w:G.x,h:G.y};f.rectangleContains(i,q,1)?(n=!1,o=!1):f.rectangleContains(q,i,1)?(n=!0,o=!1):f.rectangleContains(q,r)&&(n=!0,o=!1)}n&&(na(K[m].el),K[m].el.style.opacity=.001),K[m].el.style.zIndex=n?2:0,$(K[m].el,(l+1)*H.x),va.start||b(),va.start(j,n,o,m,d)}),T("beforeChange",f.stopSlidesTransition),T("beforeResize",f.stopSlidesTransition),T("destroy",function(){f.stopSlidesTransition(),va=null})},stopSlidesTransition:function(){f.slideTransitionRunning&&va.stop(!0)},rectangleContains:function(a,b,c){return c||(c=0),!(b.x<a.x-c||b.y<a.y-c||b.w+b.x>a.w+a.x+2*c||b.h+b.y>a.h+a.y+2*c)}}});var xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na=30,Oa=10,Pa={},Qa={},Ra={},Sa=0,Ta=function(){Ga&&(window.cancelAnimationFrame(Ga),Ga=null)},Ua={},Va=function(a,b){return Ua.prevent=!e.closest(a.target,h.isClickableElement),U("preventDragEvent",a,b,Ua),Ua.prevent},Wa=function(){};P("Gestures",{publicMethods:{initGestures:function(){var a,b,c,d,e=function(e,f,g,h){a=e+f,b=e+"move",c=e+g,d=h?e+h:""},g="ontouchstart"in window;ya=!!window.PointerEvent,ya?(e("pointer","down","up","cancel"),navigator.maxTouchPoints>1&&(t=!0),g=!1):g?(e("touch","start","end","cancel"),t=!0):e("mouse","down","up"),n=b+" "+c+" "+d,m=a,f.likelyTouchDevice=t,o[a]=Bb,o[b]=Ib,o[c]=Kb,d&&(o[d]=o[c]),g&&(z.ontouchmove=z.ontouchend=Wa,m+=" mousedown",n+=" mousemove mouseup",o.mousedown=o[a],o.mousemove=o[b],o.mouseup=o[c]),t||(h.allowPanToNext=!1),o.click=function(a){a&&(Fa||Ea||u||Ba)&&(a.preventDefault(),a.stopPropagation())}},isDragging:function(){return Ca},isZooming:function(){return Ia}}});var Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb={},qb={},rb={},sb={},tb={},ub={},vb=[],wb=function(a,b){return b.x=a.pageX,b.y=a.pageY,ya?b.id=a.pointerId:a.identifier&&(b.id=a.identifier),b},xb=[],yb=function(a,b){if(ya){for(var c=-1,d=0;d<xb.length;d++)if(xb[d].id===a.pointerId){c=d;break}c===-1?xb.push(wb(a,{})):b?xb.splice(c,1):wb(a,xb[c]),Ya=xb.length,Ya>0&&aa(pb,xb[0]),Ya>1&&aa(qb,xb[1])}else Ya=0,a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(wb(a.touches[0],pb),Ya++,a.touches.length>1&&(wb(a.touches[1],qb),Ya++)):(wb(a,pb),Ya++)},zb=function(){aa(rb,pb),aa(sb,qb)},Ab=function(){aa(tb,pb),aa(ub,qb),zb()},Bb=function(a){var b;return"mousedown"!==a.type&&"mouse"!==a.pointerType||(b=!0),!!(b&&a.button>0)||(jb?void a.preventDefault():!(!b||(Va(a,!0)&&a.preventDefault(),h.allowMouseDrag))||(U("pointerDown"),oa.completeZoomGesture||sa(),yb(a),!Ca&&Ya>0&&(Ab(),Ca=Ka=!0,e.bind(window,n,f),Aa=Ma=La=Ba=Ha=Fa=Da=Ea=!1,Ja=null,U("firstTouchStart",pb),aa(Ra,M),Qa.x=Qa.y=0,Sa=H.x*I,vb=[{x:pb.x,y:pb.y}],za=xa=V(),Vb(f.currItem,p,kb)),void(!Ia&&Ya>1&&!u&&!Ha&&(Ab(),aa(Ra,M),Xa=p,Ea=!1,Ia=Da=!0,Ja="zoom",f.currItem.w*f.currItem.h>3e6?_(!0,!0):X()))))},Cb=function(){var a=M.y-kb.center.y;return 1-Math.abs(a/(G.y/2))},Db=function(){if(V()-za>50){var a=vb.length>2?vb.shift():{};vb.push(aa(a,pb)),za=V()}},Eb=function(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.sqrt(c*c+d*d)},Fb=function(a,b,c){return(b[a]+c[a])/2},Gb=function(a,b,c){c||(Qa[a]+=Fb(a,pb,qb)-Fb(a,rb,sb));var d=Fb(a,tb,ub)-Ra[a]-J[a],e=Ra[a]+Qa[a]+d-d*(b/Xa);return c?e=ha(a,e):M[a]=e,e},Hb=function(){Ca&&(Ga=window.requestAnimationFrame(Hb),$a())},Ib=function(a){if(a.preventDefault(),yb(a),Ca){if(!Ja&&!Fa&&!Ia){if(N!==H.x*I)Ja="h";else{var b=Math.abs(pb.x-rb.x)-Math.abs(pb.y-rb.y);if(0!==b){var c=b>0?"x":"y";Math.abs(pb[c]-tb[c])>=Oa&&(Ja="x"===c?"h":"v")}}zb()}if("touchmove"===a.type&&Ja&&pb.x<-20&&tb.x<20&&!Ia)return Ja=!1,void(Za=!0);Za=!1,!Ga&&Ja&&($a||Jb(),Ta(),Hb())}},Jb=function(){var a=function(a,b){var c,d,e,g,i=0,j=M[a]+b[a],k=b[a]>0,l=N+b.x,m=N-Sa;j>kb.min[a]||j<kb.max[a]?(c=h.panEndFriction,j=M[a]+b[a]*c):c=1;var n=p<=f.currItem.fitRatio;return(h.allowPanToNext||n)&&(x?"h"!==Ja||"x"!==a||Ea||(k?(j>kb.min[a]&&(c=h.panEndFriction,i=kb.min[a]-j,d=kb.min[a]-Ra[a]),(d<=0||m<0||n)&&nb()>1?(g=l,m<0&&l>Sa&&(g=Sa)):kb.min.x!==kb.max.x&&(e=j)):(j<kb.max[a]&&(c=h.panEndFriction,i=j-kb.max[a],d=Ra[a]-kb.max[a]),(d<=0||m>0||n)&&nb()>1?(g=l,m>0&&l<Sa&&(g=Sa)):kb.min.x!==kb.max.x&&(e=j))):g=l,"x"===a)?(void 0!==g&&(ca(g,!0),Ha=g!==Sa),kb.min.x!==kb.max.x&&(void 0!==e?M.x=e:Ha||(M.x+=b.x*c)),void 0!==g):void(!u&&!Ha&&p>f.currItem.fitRatio&&(M[a]+=b[a]*c))};$a=function(){if(0!==Ya){if(w&&(x.transition="none"),Pa.x=pb.x-rb.x,Pa.y=pb.y-rb.y,Ia&&Ya>1){Ea||(Ea=!0,U("zoomGestureStarted"));var b=1/Eb(tb,ub)*Eb(pb,qb)*Xa;b>f.currItem.fitRatio+f.currItem.fitRatio/15&&(Ma=!0);var c=1,d=f.currItem.fitRatio,e=f.currItem.w>0?h.maxSpreadZoom:1;if(b<d)if(h.pinchToClose&&!Ma&&Xa<=f.currItem.fitRatio){var g=d-b,i=1-g/(d/1.2);W(i),U("onPinchClose",i),La=!0}else c=(d-b)/d,c>1&&(c=1),b=d-c*(d/3);else b>e&&(c=(b-e)/(6*d),c>1&&(c=1),b=e+c*d);Gb("x",b),Gb("y",b),Aa=b>p,p=b,_()}else{if(!Ja)return;if(Ka&&(Ka=!1,(Math.abs(Pa.x)>=Oa||Math.abs(Pa.y)>=Oa)&&(Pa.x-=pb.x-tb.x,Pa.y-=pb.y-tb.y)),0===Pa.x&&0===Pa.y)return;if("v"===Ja&&h.closeOnVerticalDrag&&p<=f.currItem.fitRatio){Qa.y+=Pa.y,M.y+=Pa.y;var j=Cb();Ba=!0,U("onVerticalDrag",j),W(j),_()}else{Db(),Fa=!0;var k=a("x",Pa);k||(a("y",Pa),da(M),_())}}zb()}}},Kb=function(a){U("pointerUp");var b,c,d=Va(a,!1);if(d&&a.preventDefault(),yb(a,!0),"mouseup"===a.type&&(Ya=0),Ya>=2)return!0;if(0!==Ya||Ja||u||(ya||"mouseup"===a.type?c={x:a.pageX,y:a.pageY,type:a.pointerType||"mouse"}:a.changedTouches&&a.changedTouches[0]&&(c={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"}),d&&c&&U("touchRelease",a,c)),0===Ya&&(Ca=!1,pb.id=qb.id=!1,e.unbind(window,n,f),b="swipe",Ta()),Ia&&Ya<2&&(Ia=!1,b=1===Ya?"zoomPointerUp":"zoom",Ea||_(!0),U("zoomGestureEnded")),(Fa||Ea||u||Ba)&&!oa.completeZoomGesture)if(_a||Lb(),_a("x"),Ba){var g=Cb();if(g<h.verticalDragRange)f.close();else{var i=M.y,j=E;ta("verticalDrag",0,1,300,e.easing.cubic.out,function(a){M.y=(kb.center.y-i)*a+i,W((1-j)*a+j),_()}),U("onVerticalDrag",1)}}else{if((Ha||u)&&0===Ya){var k=eb(b);if(k)return}if(!u)return"swipe"!==b?void db():void(!Ha&&p>f.currItem.fitRatio&&ab())}},Lb=function(){var a,b,c={},d={},g={},i={},j={},l={};bb={},cb={},_a=function(e){vb.length>1?(a=V()-za+50,b=vb[vb.length-2][e]):(a=V()-xa,b=tb[e]),bb[e]=pb[e]-b,cb[e]=bb[e]/a,(Math.abs(cb[e])<.1||Math.abs(bb[e])<20)&&(cb[e]=0),c[e]=.95,d[e]=1},db=function(){if(La&&!Aa&&!Ma&&p<f.currItem.fitRatio)return f.close(),!0;var a=Math.max(f.currItem.fitRatio,p);a=Math.min(f.currItem.w>0?h.maxSpreadZoom:1,a);var b=E,c={},d=p,g=aa({},M);return Vb(f.currItem,a,kb),a===f.currItem.fitRatio?aa(c,kb.center):(c.x=Gb("x",a,!0),c.y=Gb("y",a,!0),da(c)),ta("completeZoomGesture",0,1,200,e.easing.cubic.out,function(e){p=(a-d)*e+d,M.x=(c.x-g.x)*e+g.x,M.y=(c.y-g.y)*e+g.y,La&&W((1-b)*e+b),_(1===e)}),!0};var m,n,o,q,r=function(a){l[a]||(M[a]>kb.min[a]?j[a]=kb.min[a]:M[a]<kb.max[a]&&(j[a]=kb.max[a]),void 0!==j[a]&&(c[a]=.7,g[a]<.05&&(cb[a]=0,l[a]=!0,ta("bounceZoomPan"+a,M[a],j[a],250,e.easing.sine.out,function(b){M[a]=b,_()}))))},t=function(a){l[a]||(q=1-c[a],d[a]*=c[a]+q-q*o/10,g[a]=Math.abs(cb[a]*d[a]),i[a]=cb[a]*d[a]*o,M[a]+=i[a])},v=function(){if(oa.zoomPan)return oa.zoomPan.raf=window.requestAnimationFrame(v),m=V(),o=m-n,n=m,t("x"),t("y"),_(),r("x"),r("y"),g.x<.05&&g.y<.05?(M.x=Math.round(M.x),M.y=Math.round(M.y),_(),void qa("zoomPan")):void 0};ab=function(){return _a("y"),j={},l={},Math.abs(cb.x)<=.05&&Math.abs(cb.y)<=.05?(g.x=g.y=0,r("x"),r("y"),!0):(ra("zoomPan"),n=V(),void v())},eb=function(a){var b,c,d;if("swipe"===a){var g=pb.x-tb.x,i=Math.abs(bb.x)<10;g>Na&&(i||bb.x>20)?c=-1:g<-Na&&(i||bb.x<-20)&&(c=1)}c&&(k+=c,k<0?(k=h.loop?nb()-1:0,d=!0):k>=nb()&&(k=h.loop?0:nb()-1,d=!0),d&&!h.loop||(s+=c,I-=c,b=!0));var j=H.x*I,l=Math.abs(cb.x)>0?Math.abs(j-N)/Math.abs(cb.x):333;return l=Math.min(l,400),l=Math.max(l,250),u=!0,U("mainScrollAnimStart"),ta("mainScroll",N,j,l,e.easing.cubic.out,ca,function(){sa(),u=!1,b&&f.updateCurrItem(),U("mainScrollAnimComplete")}),b&&Math.abs(s)>1&&f.updateCurrItem(),b}},Mb=function(a){var b=a.overflow;p=a.w/f.currItem.w,b?(y.style.overflow="hidden",y.style.width=G.x+"px",$(y,-G.x+(a.x-b.x)+b.w,-G.y+(a.y-J.y-b.y)+b.h),$(gb,G.x-b.w,G.y-b.h),aa(M,b)):(M.x=a.x,M.y=a.y-J.y),_()},Nb=function(b,c){p=f.currItem.initialZoomLevel,aa(M,kb.center),U("calcInitialZoomPan"),_(),c&&(b?a.style.opacity=1:W(1))},Ob=function(){qa("initialZoom"),jb=!1,j?(f.destroy(),y.removeAttribute("style"),a.removeAttribute("style"),A.removeAttribute("style")):(W(1),A.style.transition=a.style.transition=x.transition=gb.style.transition=y.style.transition="none",y.style.overflow="visible",y.style.width="100%",U("initialZoom"+(j?"OutEnd":"InEnd")))},Pb=function(){var b=j,c=f.currItem;fb&&clearTimeout(fb),jb=!0,ib=!0;var d;c.initialLayout?(d=c.initialLayout,c.initialLayout=null):d=h.getThumbBoundsFn&&h.getThumbBoundsFn.call(f,k);var e=b?h.hideAnimationDuration:h.showAnimationDuration;if(f.currItem.src||(d=!1),gb=K[1].el,!e||!d||void 0===d.x||!f.currItem.src||f.currItem.loadError)return U("initialZoom"+(b?"Out":"In")),b||(Nb(!0,!1),a.style.opacity=1),e?(na(A),na(a),b?K[0].el.style.display=K[2].el.style.display="none":(W(1),na(a),a.style.opacity=.001),void(fb=setTimeout(function(){na(a,"opacity",e),ka.showHideTransition={el:a,fn:Ob},a.style.opacity=b?0:1},60))):void Ob();c.placeholder&&X(c.placeholder);var g=h.showHideOpacity?a:A;b?(K[0].el.style.display=K[2].el.style.display="none",d.overflow&&($(K[1].el,0),$(y,0))):(na(g),g.style.opacity=.001,h.showHideOpacity?W(1):a.style.opacity=1,c.placeholder&&(c.placeholder.style.opacity=1),Mb(d)),ra("initialZoom"),fb=setTimeout(function(){na(g,"opacity",e),d.overflow&&(na(y,C,e),na(gb,C,e)),na(f.currItem.container,C,e),ka.showHideTransition={el:f.currItem.container,fn:Ob},U("initialZoom"+(b?"Out":"In")),requestAnimationFrame(function(){if(b){if(!j)return;h.showHideOpacity?a.style.opacity=0:W(0),Mb(d)}else{if(j)return;d.overflow&&($(y,0),$(gb,0)),Nb(h.showHideOpacity,!0)}})},b?20:70)},Qb={},Rb=[],Sb={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return hb.length}},Tb=function(a){return a||(a={center:{},max:{},min:{}}),a.center.x=a.center.y=a.max.x=a.max.y=a.min.x=a.min.y=0,a},Ub=function(a,b,c,d){if(0===b.w)return Tb(d),d;var e="x"===a?"left":"top",f=b["x"===a?"w":"h"]*c;return Qb[a]=G[a]-b.vGap[e]-b.vGap["x"===a?"right":"bottom"],d.center[a]=Math.round((Qb[a]-f)/2)+b.vGap[e],d.max[a]=f>Qb[a]?Math.round(Qb[a]-f)+b.vGap[e]:d.center[a],d.min[a]=f>Qb[a]?b.vGap[e]:d.center[a],d},Vb=function(a,b,c){return c||(c=Tb()),a.src&&0!==a.w&&0!==a.h?(Ub("x",a,b,c),Ub("y",a,b,c),c):(c&&Tb(c),c)},Wb=function(a){if(a.vGap||(a.vGap={top:0,bottom:0,left:0,right:0}),U("parseVerticalMargin",a),a.src&&!a.loadError){Qb.x=G.x-a.vGap.left-a.vGap.right,Qb.y=G.y-a.vGap.top-a.vGap.bottom;var b=Qb.x/a.w,c=Qb.y/a.h;a.fitRatio=b<c?b:c,a.fitRatio>1&&(a.fitRatio=1),a.initialZoomLevel=h.openZoomed?1:a.fitRatio}else a.w=a.h=0,a.fitRatio=a.initialZoomLevel=1},Xb=function(a,b){b&&!Zb(a,!0)&&(a.imageAppended=!0,$b(a,b,a===f.currItem&&O),a.container.appendChild(b),a.loaded&&a.placeholder&&setTimeout(function(){a&&a.loaded&&a.placeholder&&(a.placeholder.style.display="none",a.placeholder=null)},500))},Yb=function(a,b){a.loading=!0,a.loaded=!1,a.img=e.createEl("pswp__img","img"),a.img.alt&&a.img.setAttribute("alt",a.img.alt);var c=function(){a.loading=!1,a.loaded=!0,i&&(f.itemLoaded(a,b),U("imageLoadComplete",b,a)),a.img&&(a.img.onload=a.img.onerror=a.img=null),c=null};return a.img.onload=c,a.img.onerror=function(){a.loadError=!0,c()},a.img.src=a.src,a.img},Zb=function(a,b){if(a.src&&a.loadError){var c=e.createEl();if(c.innerHTML=h.errorMsg.replace("%url%",a.src),c=c.firstElementChild,b){var d=a.container.parentElement;d.innerHTML="",d.appendChild(c),a.container=c,Wb(a),a===f.currItem&&f.updateCurrZoomItem(),ba(a)}return a.container=c,!0}},$b=function(a,b,c){if(a.src&&0!==a.w){b||(b=a.container.lastElementChild),h.openZoomed&&(c=!0);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.ceil(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},_b=function(){Rb.length&&i&&(Rb.forEach(function(a){a.holder.index===a.index&&Xb(a.item,a.img)}),Rb=[])},ac=function(a){if(!jb){var b,c=h.preload,d=void 0===a||a>=0,e=Math.min(c[0],nb()),g=Math.min(c[1],nb());for(b=1;b<=(d?g:e);b++)f.lazyLoadItem(k+b);for(b=1;b<=(d?e:g);b++)f.lazyLoadItem(k-b)}};P("Controller",{publicMethods:{lazyLoadItem:function(a){a=Q(a);var b=mb(a);!b||b.loaded||b.loading||(U("gettingData",a,b,!0),b.src&&Yb(b,a))},initController:function(){e.extend(h,Sb,!0),f.items=hb=c,mb=f.getItemAt,nb=h.getNumItemsFn,kb=Tb(),lb=Tb(),ob=h.loop,nb()<3&&(h.loop=!1),T("beforeChange",ac),T("mainScrollAnimComplete",_b),T("initialZoomInEnd",function(){_b(),ac()}),T("destroy",function(){hb.forEach(function(a){a.container&&(a.container=null,a.placeholder=null,a.img=null),a.loadError&&(a.loaded=a.loadError=!1)}),Rb=null})},getItemAt:function(a){return a>=0&&(void 0!==hb[a]&&hb[a])},allowProgressiveImg:function(){return h.forceProgressiveLoading||!t||h.mouseUsed||screen.width>1200},itemLoaded:function(a,b){K.forEach(function(c){c.index===b&&(jb&&ac(),a.imageAppended?(Zb(a,!0),a.placeholder&&(a.placeholder.style.display="none",a.placeholder=null)):u||jb?Rb.push({item:a,img:a.img,index:b,holder:c}):Xb(a,a.img))})},setContent:function(a,b){h.loop&&(b=Q(b));var c=f.getItemAt(a.index);c&&(c.placeholder=c.container=null);var d,g=f.getItemAt(b);if(!g)return a.el.innerHTML="",a.index=-1,{};if(U("gettingData",b,g),a.index=b,a.item=g,g.added=!0,g.container=e.createEl("pswp__zoom-wrap"),!g.src&&g.html&&(g.html.tagName?g.container.appendChild(g.html):g.container.innerHTML=g.html),Zb(g),Wb(g),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),g.alt&&d.setAttribute("alt",g.alt),d.style.opacity=1,d.src=g.src,$b(g,d),Xb(g,d));else{var i="pswp__img pswp__img--placeholder";g.msrc||(i+=" pswp__img--placeholder--blank");var j=e.createEl(i,g.msrc?"img":"");g.msrc&&(j.src=g.msrc,j.setAttribute("aria-hidden","true")),$b(g,j),g.container.appendChild(j),g.placeholder=j,g.loading||Yb(g,b),f.allowProgressiveImg()&&(ib?Xb(g,g.img):Rb.push({item:g,img:g.img,index:b,holder:a}))}b===k?(p=g.initialZoomLevel,Vb(g,p,kb),a.el.removeAttribute("aria-hidden")):a.el.setAttribute("aria-hidden","true"),ib||b!==k?ba(g):(x=g.container.style,Pb()),a.el.innerHTML="",a.el.appendChild(g.container),U("afterSetContent",g)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var bc=600;P("Tap",{publicMethods:{initTap:function(){var a,b,c={},d=function(){b=null},e=function(){a=null},g=function(a,b){return Math.abs(a.x-b.x)<25&&Math.abs(a.y-b.y)<25};T("firstTouchStart",function(c){c.length>1&&(clearTimeout(a),a=null),clearTimeout(b),b=setTimeout(d,bc)}),T("touchRelease",function(d,h){if(f.lastPointer=h,h.x-=J.x,h.y-=J.y,!(d.type.indexOf("cancel")>-1)&&i&&b&&(clearTimeout(b),b=null,!Fa&&!Da&&!pa)){var j=h;if(a&&(clearTimeout(a),a=null,g(j,c)))return void U("doubleTap",j);if("mouse"===h.type)return void U("tap",d,h);var k={allow:!0};if(U("allowDoubleTap",d,k),!k.allow||"BUTTON"===d.target.tagName||d.target.classList.contains("pswp__single-tap"))return void U("tap",d,h);aa(c,j),a=setTimeout(e,300)}}),T("destroy",function(){clearTimeout(a),clearTimeout(b)})}}}),P("DesktopZoom",{publicMethods:{initDesktopZoom:function(){t?T("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0)},setupDesktopZoom:function(b){var c,d={},g={},j=function(){f.currItem.fitRatio&&(a.classList[f.currItem.fitRatio<p?"add":"remove"]("pswp--zoomed-in"),a.classList[f.currItem.fitRatio<1?"add":"remove"]("pswp--zoom-allowed"))},k=function(a){if(i){if(h.modal&&a.preventDefault(),"gesturestart"===a.type)return void(f.initialGestureZoomLevel=p);var b;"wheel"===a.type?(d.x=a.deltaX,d.y=a.deltaY,1===a.deltaMode&&(d.x*=18,d.y*=18),g.scale=!!a.ctrlKey&&p+.04*f.currItem.fitRatio*-d.y,b=!0):a.scale&&(g.scale=f.initialGestureZoomLevel*a.scale,b=!0),g.x=a.clientX,g.y=a.clientY,b&&!c&&window.requestAnimationFrame(l),c=!0,U("wheel",a)}},l=function(){if(c=!1,!(f.slideTransitionRunning||Ca||oa.customZoomTo))if(g.scale){var a=g.scale;a<f.currItem.fitRatio?a=f.currItem.fitRatio:a>2&&(a=2),f.zoomTo(a,g)}else f.panTo(M.x-d.x,M.y-d.y),d.x=d.y=0};T("afterChange",j),T("zoomPanUpdate",j),e.bind(a,"wheel gesturestart gesturechange",k),T("unbindEvents",function(){e.unbind(a,"wheel gesturestart gesturechange",k)}),b||j()}}}),P("History",{publicMethods:{initHistory:function(){if(h.history&&"pushState"in history){var a,b,c,d,g,j,l=!1,m=window.location,n=function(){return m.hash.substring(1)},o=n(),p=function(){var a=k+1;f.currItem.hasOwnProperty("pid")&&(a=f.currItem.pid);var b=o+"?gid="+(void 0===h.galleryUID?1:h.galleryUID)+"&pid="+a;return b},q=function(){a&&clearTimeout(a),c&&clearTimeout(c)},r=function(){var a=n(),b=-1,c=a.match(/&pid=([^&]+)/);return c&&c.length>1&&(b=c[1],h.galleryPIDs?hb.every(function(a,c){if(a.pid===b)return b=c,!0}):b=parseInt(b,10)-1,(isNaN(b)||b<0||b>nb()-1)&&(b=0)),b},s=function(a){if(!a){if(c&&clearTimeout(c),pa||Ca)return void(c=setTimeout(s,500));d?clearTimeout(b):d=!0}var e=p();if("#"+e!==m.hash){var f=m.href.split("#")[0]+"#"+e;history[j?"replaceState":"pushState"]("",document.title,f),j=!0}b=setTimeout(function(){d=!1},60)},t=function(){q(),n()!==p()&&(j?a=setTimeout(s,800):s())},u=function(){if(n()===o)return l=!0,Za&&(h.hideAnimationDuration=0),void f.close();if(!d&&n()!==p()){var a=r();a>=0&&f.goTo(a)}};o.indexOf("?gid=")>-1&&(o=o.split("?gid=")[0]),T("afterChange",t),T("unbindEvents",function(){e.unbind(window,"hashchange",u)}),T("destroy",function(){g||(g=!0,l||(j?history.back():o?m.hash=o:history.pushState("",document.title,m.pathname+m.search)),q())}),T("firstUpdate",function(){var a=r();a>=0&&(k=a)}),T("initialLayout",function(){s(!0)}),setTimeout(function(){i&&e.bind(window,"hashchange",u)},40)}}}}),P("MousemovePan",{publicMethods:{initMousemovePan:function(){if(h.mouseMovePan){var a,b,c,d,g,i,k,l,m={},n=function(){b={},c={},g=function(a){oa.customZoomTo||(M.x=(b.x-c.x)*a+c.x,M.y=(b.y-c.y)*a+c.y,_())},i=function(){return jb||j||Ca||d||oa.customZoomTo||f.slideTransitionRunning},k=function(){if(a=!1,!i()){var d=Math.sqrt(Math.pow(b.x-M.x,2)+Math.pow(b.y-M.y,2));d<.3||(qa("mouseMovePan"),aa(c,M),d<2?g(1):ta("mouseMovePan",0,1,250,e.easing.cubic.out,g))}},l=function(a){if(f.currItem.src)return a.x=ia("x",m),a.y=ia("y",m),aa(c,a),!0}},o=function(c){if(!f.currItem.src)return!0;if(m.x=c.clientX,m.y=c.clientY,p<=f.currItem.fitRatio)return!0;if(i())return!0;var d={};return U("mouseMovePan",c,d),!!d.stop||(b||n(),b.x=ia("x",m),b.y=ia("y",m),a||window.requestAnimationFrame(k),void(a=!0))};h.allowMouseDrag=!1,T("bindEvents",function(){e.bind(document,"mousemove",o)}),T("unbindEvents",function(){e.unbind(document,"mousemove",o),qa("mouseMovePan")}),T("wheel",function(){qa("mouseMovePan"),clearTimeout(d),d=setTimeout(function(){d=null},400)}),h.openZoomed&&(n(),aa(m,h.initialPointerPos),T("calcInitialZoomPan",function(){l(M)}))}}}}),e.extend(f,ua)};return a});